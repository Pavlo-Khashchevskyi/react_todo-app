(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(10),a=n.n(r),s=(n(37),n(38),n(39),n(6)),u=n(5),l=n(4),i=n.n(l),d=n(67),p=n(13),j=n.n(p),b="https://mate.academy/students-api",f=88888,h=function(e){return j.a.delete("".concat(b,"/todos/").concat(e))},O=function(e,t){return j.a.patch("".concat(b,"/todos/").concat(e),t)},m=n(11),x=n.n(m),v=n(1),g=function(e){var t=e.handleSortBy,n=e.sortBy;return Object(v.jsxs)("ul",{className:"filters",children:[Object(v.jsx)("li",{children:Object(v.jsx)("button",{type:"button",className:x()({selected:"all"===n}),onClick:function(){t("all")},children:"All"})}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{type:"button",className:x()({selected:"active"===n}),onClick:function(){t("active")},children:"Active"})}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{type:"button",className:x()({selected:"completed"===n}),onClick:function(){t("completed")},children:"Completed"})})]})},y=o.a.memo(g),w=n(18),k=n(68),C=n(2),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"toggleAll":return Object(C.a)(Object(C.a)({},e),{},{todos:e.todos.map((function(e){return t.allTodosCompleted?Object(C.a)(Object(C.a)({},e),{},{completed:!1}):Object(C.a)(Object(C.a)({},e),{},{completed:!0})}))});case"getUser":return Object(C.a)(Object(C.a)({},e),{},{user:t.user});case"getUserTodos":return Object(C.a)(Object(C.a)({},e),{},{todos:t.todos});case"addTodo":return Object(C.a)(Object(C.a)({},e),{},{todos:[].concat(Object(w.a)(e.todos),[t.todo])});case"deleteTodo":return Object(C.a)(Object(C.a)({},e),{},{todos:e.todos.filter((function(e){return e.id!==t.id}))});case"updateTodo":return Object(C.a)(Object(C.a)({},e),{},{todos:e.todos.map((function(e){return e.id===t.id?t.todo:e}))});case"clearCompletedTodos":return Object(C.a)(Object(C.a)({},e),{},{todos:e.todos.filter((function(e){return!1===e.completed}))});default:return Object(C.a)({},e)}},T={todos:[],user:null},E=o.a.createContext((function(){})),S=o.a.createContext(T),B=function(e){var t=e.children,n=Object(c.useReducer)(N,T),o=Object(u.a)(n,2),r=o[0],a=o[1];return Object(v.jsx)(E.Provider,{value:a,children:Object(v.jsx)(S.Provider,{value:r,children:t})})},R=function(e){var t=e.todo,n=e.handleRemoveTodo,o=e.updateTodo,r=Object(c.useState)(t.title),a=Object(u.a)(r,2),s=a[0],l=a[1],i=Object(c.useState)(!1),d=Object(u.a)(i,2),p=d[0],j=d[1],b=function(){""===s?n(t.id):o(t.id,{title:s}),j(!1)};return Object(v.jsxs)("li",{className:x()({completed:t.completed},{editing:p}),onDoubleClick:function(){return j(!0)},children:[Object(v.jsxs)("div",{className:"view",children:[Object(v.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,onChange:function(){o(t.id,{completed:!t.completed})}}),Object(v.jsx)("label",{children:t.title}),Object(v.jsx)("button",{type:"button",className:"destroy",onClick:function(){return n(t.id)}})]}),Object(v.jsx)("input",{type:"text",className:"edit",value:s,onChange:function(e){l(e.target.value)},onKeyDown:function(e){var n=e.nativeEvent.key;"Enter"===n?b():"Escape"===n&&(l(t.title),j(!1))},onBlur:function(){b()}})]})},A=function(e){var t=e.handleRemoveTodo,n=e.updateTodo,o=e.sortBy,r=Object(c.useContext)(S).todos,a=Object(w.a)(r);switch(o){case"completed":a=a.filter((function(e){return!0===e.completed}));break;case"active":a=a.filter((function(e){return!1===e.completed}))}return Object(v.jsx)("ul",{className:"todo-list",children:Object(v.jsx)(k.a,{children:a.map((function(e){return Object(v.jsx)(d.a,{timeout:500,classNames:"item",children:Object(v.jsx)(R,{todo:e,handleRemoveTodo:t,updateTodo:n})},e.id)}))})})},U=function(){var e=Object(c.useContext)(E),t=Object(c.useContext)(S),n=t.todos,o=t.user,r=Object(c.useState)(0),a=Object(u.a)(r,2),l=a[0],p=a[1],m=Object(c.useState)(0),x=Object(u.a)(m,2),g=x[0],w=x[1],k=Object(c.useState)(""),C=Object(u.a)(k,2),N=C[0],T=C[1],B=Object(c.useState)("all"),R=Object(u.a)(B,2),U=R[0],D=R[1],I=function(){var t=Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("".concat(b,"/users/").concat(f));case 3:200===(n=t.sent).status&&e({type:"getUser",user:n.data}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.a.get("".concat(b,"/todos?userId=").concat(f));case 3:200===(n=t.sent).status&&e({type:"getUserTodos",todos:n.data}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=N,j.a.post("".concat(b,"/todos"),{title:c,userId:f,completed:!1});case 3:201===(n=t.sent).status&&e({type:"addTodo",todo:n.data}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("error");case 10:case"end":return t.stop()}var c}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),_=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h(n);case 3:200===t.sent.status&&e({type:"deleteTodo",id:n}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(s.a)(i.a.mark((function t(n,c){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O(n,c);case 3:200===(o=t.sent).status&&e({type:"updateTodo",id:n,todo:o.data}),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){I(),J()}),[]),Object(c.useEffect)((function(){!function(){var e=n.filter((function(e){return!0===e.completed})).length,t=n.filter((function(e){return!1===e.completed})).length;p(e),w(t)}()}),[n]),Object(v.jsxs)("section",{className:"todoapp",children:[Object(v.jsxs)("header",{className:"header",children:[Object(v.jsx)(d.a,{in:!!o,timeout:1e3,classNames:"header-title",children:Object(v.jsx)("h1",{children:"todos"})}),Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),N.trim()&&(P(),T(""))},children:Object(v.jsx)("input",{value:N,type:"text",className:"new-todo",placeholder:"What needs to be done?",onChange:function(e){!function(e){T(e.target.value)}(e)}})})]}),Object(v.jsxs)("section",{className:"main",children:[Object(v.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:0===n.filter((function(e){return!e.completed})).length,onChange:function(){!function(){var t=0===n.filter((function(e){return!e.completed})).length;t?n.forEach((function(e){O(e.id,{completed:!1})})):n.forEach((function(e){!1===e.completed&&O(e.id,{completed:!0})})),e({type:"toggleAll",allTodosCompleted:t})}()}}),Object(v.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(v.jsx)(A,{handleRemoveTodo:_,updateTodo:F,sortBy:U})]}),!!n.length&&Object(v.jsxs)("footer",{className:"footer",children:[!!g&&Object(v.jsx)("span",{className:"todo-count",children:1===n.length?"1 item left":"".concat(g," items left")}),Object(v.jsx)(y,{handleSortBy:function(e){D(e)},sortBy:U}),!!l&&Object(v.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){n.forEach(function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!0!==n.completed){t.next=6;break}return t.next=4,h(n.id);case 4:200===t.sent.status&&e({type:"clearCompletedTodos"});case 6:t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error("error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}())},children:"Clear completed"})]})]})};a.a.render(Object(v.jsx)(B,{children:Object(v.jsx)(U,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.607203c3.chunk.js.map